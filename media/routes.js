function ytrlut(a,b){load("/data/ytrlut.json",function(c){if(a in c.lut){var d=c.lut[a];d<c.videos.length?b(c.videos[d]):b(null)}else getReverseVideo(a,a=>{null!=a.video?b(a.video):b(null)})})}function ytRoute(a,b,c,d){ytrlut(a.trim(),e=>{if(null!=e){var a=e.split("/"),f="videos";b.append("v",a[0]),a.length>=2&&b.append("p",a[1]),mkRoute(f,b,c,d)}else d(null)})}function mkRoute(f,a,g,h,i=!1){for(var b of g.entries())a.has(b[0])||a.append(b[0],b[1]);var d="";if(i){var c=window.location.hash.substr(1);""!=c&&"!"!=c&&(d="#"+c)}var e=a.toString();h("/"+f+(e.length>0?"?"+e:"")+d)}function getRoute(e,f,c){rt=(rt=(rt=e.split(/\/+/i)).map(a=>a.trim())).filter(a=>a.length>0&&""!=a);var b=new URLSearchParams(f),d=null,a=new URLSearchParams;if(2==rt.length&&"videos"==rt[0])d="videos",a.append("v",rt[1]),mkRoute(d,a,b,c);else if(3==rt.length&&"videos"==rt[0]&&"unblocked"==rt[2])d="videos",a.append("v",rt[1]),a.append("e","unblocked"),mkRoute(d,a,b,c);else if(3==rt.length&&"videos"==rt[0]&&/^\d+$/.test(rt[2]))d="videos",a.append("v",rt[1]),a.append("p",rt[2]),mkRoute(d,a,b,c);else if(4==rt.length&&"videos"==rt[0]&&/^\d+$/.test(rt[2])&&"unblocked"==rt[3])d="videos",a.append("v",rt[1]),a.append("p",rt[2]),a.append("e","unblocked"),mkRoute(d,a,b,c);else if(1==rt.length&&"watch"==rt[0]&&null!=b.get("v")){var g=b.get("v");b.delete("v"),ytRoute(g,a,b,c)}else if(rt.length>=1&&/^[a-zA-Z0-9-_]{11}$/.test(rt[0]))ytRoute(rt[0],a,b,c);else if(1==rt.length&&"deadmau5"==rt[0]&&null!=b.get("vod")){d="videos";var h=b.get("vod");a.append("v",h),b.delete("vod"),mkRoute(d,a,b,c)}else 1==rt.length&&"chat_mixer"==rt[0]?mkRoute("chat",a,b,c):1==rt.length&&"all"==rt[0]?(a.append("p","all"),mkRoute("page",a,b,c)):rt.length>1&&"page"==rt[0]?(a.append("p",1),mkRoute("page",a,b,c)):1==rt.length&&"version_history.html"==rt[0]?mkRoute("version_history",a,b,c,!0):c(null)}