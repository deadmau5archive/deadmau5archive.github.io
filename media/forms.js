function loadFormFromLink(){var e=new URL(window.location.href).searchParams.get("t");null!=e?loadFormWithToken(e):document.getElementById("form_container").innerHTML='no form to load. <br><br><a href="/" class="shade">Go home</a>'}var formContent=[],formSubmitToken=null;function loadFormWithToken(e){var t=document.getElementById("form_container");t.innerHTML="<i>loading...</i>",formsGet(e,e=>{for(var n of(formContent=e.form,formSubmitToken=e.submit_token,t.innerHTML="",formContent)){var a=n.type,r=document.createElement("div");if(r.className="form-element","textinput"==a||"textarea"==a||"select"==a){var l=document.createElement("span");l.innerHTML=n.label,r.appendChild(l),r.appendChild(document.createElement("br"))}if("heading"==a)r.innerHTML="<h2>"+n.text+"</h2>";else if("text"==a){var o=n.text;o=(o=(o=(o=o.replaceAll(/\<(http\S*)\>/gi,'<a href="$1" class="shade" target="_blank">$1</a>')).replaceAll(/\*\*(.*)\*\*/gi,"<b>$1</b>")).replaceAll(/\*(.*)\*/gi,"<i>$1</i>")).replaceAll("\r","").replaceAll("\n","<br>"),r.innerHTML=o}else if("button"==a){var i=document.createElement("button");i.type="button",i.innerHTML=n.label,i.onclick=function(e){return function(){formButton(e)}}(n),r.appendChild(i)}else if("textinput"==a){var m=document.createElement("input");m.type="text",m.id="forminput_"+n.name,r.appendChild(m)}else if("textarea"==a){var m=document.createElement("textarea");m.id="forminput_"+n.name,r.appendChild(m)}else if("select"==a){var f=document.createElement("div");for(var p of n.options)f.innerHTML+='<label> <input type="checkbox" id="forminput_'+n.name+"_"+p.value+'"> '+p.label+" </label><br>";r.appendChild(f)}t.appendChild(r)}})}function formButton(e){if("submit"==e.action){var t={};for(var n of formContent)if("name"in n){var a=n.type,r=n.name,l=null;if("textinput"==a||"textarea"==a)l=document.getElementById("forminput_"+r).value;else if("select"==a)for(var o of(l=[],n.options))document.getElementById("forminput_"+r+"_"+o.value).checked&&l.push(o.value);t[r]=l}formsSubmit(formSubmitToken,t,e=>{var t=e.next;null!=t&&loadFormWithToken(t)})}}